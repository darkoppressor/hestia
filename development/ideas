Phase 1:
RTS with online multiplayer, lockstep network model
No floating point numbers in game code
World divided into chunks, those are grouped into regions of uneven sizes and shapes
Regions have a certain biome, which determines their ground type, for looks right now
Tiles exist in some places (whole world is not made of them)
The world is divided into an imaginary grid, with its squares being the size of the smallest tile type
Tiles must snap to this grid, and cannot be partially out of the world
Tiles are stored in a map, with their key being their tile coords (and thus unique)
Tile types are wheat, tree, unfinished building, city building
Each tile type determines its size, and the buildings are bigger than wheat and trees
World is randomly generated in a very basic way for now
Leaders each have a unique color, randomly assigned for now
Each leader leads a civ
Each civ begins with one city, randomly placed for now, cannot overlap any tiles or be off the map
Cities belong to a civ
Cities exist in the world as a single city building tile, which belongs to the city
People belong to a city, and to its civ
No collision for now between people and tiles

Maximum world size in pixels is 2^31 - 1 (max value of int32_t)

Civ has inventory, infinite
People have inventory, finite

There is a global variable max population per city
There is a global var breeding cooldown
If a civ has less than max population, its breeding cooldown ticks down
When the breeding cooldown reaches 0, it is set to breeding cooldown and a person is spawned for that civ and city

A person becomes hungry over time
When hungry past a threshold, person eats if possible
Starts by looking in inv, then in small area around self for wheat tile, then in civ inv

Chunks and regions persist through the whole game, and will be stored in vectors
Regions know their child chunks by index
Chunks know their parent region by index
Leaders and civs persist through the whole game, and will be stored in vectors
Leaders know their child civ by index
Civs know their parent leader by index
Civs know their child cities by index
Cities know their parent civ by index
Cities are stored in a vector, and this vector can change throughout the game
Cities know their child city building tile by tile coords

When a city building is killed, it needs to know what civ killed it
The parent city becomes property of the killing civ, the old and new civ are informed of this,
the city building is restored to some fraction of its max HP, and the city's people have their conquered cooldown started
When a person's conquered cooldown is in progress, AI other than basic survival (e.g., eating, fleeing) is disabled

Civs know their child unfinished building tiles by tile coords
When an unfinished building is killed, it should update its parent civ's knowledge of it
When an unfinished building is finished, it should update its parent civ's knowledge of it, then create a new city parent,
and inform the parent civ of this

People know their parent city by index
City building tiles know their parent city by index
Note that people and city building tiles' parent city index needs to be kept up to date when cities are constructed or abandoned
Unfinished buildings know their parent civ by index

People are stored in a vector, and this vector can change throughout the game
Cities know their child people by index (note that this list needs to be kept up to date when people spawn, change cities, or die)

People need to look at other people via a quadtree

All civs are hostile to each other for now

The Leader can order the creation of a new city by placing an unfinished building tile
Assuming the tile placement is acceptable, the new unfinished building tile is immediately spawned at the ordered location
When placing a new city, it cannot be within a certain radius of any other building tiles (including unfinished ones)

The Leader can order a repopulation for a city
If the city has less than its max population, people will be selected from other cities in the civ and changed to children of the city
There is a global minimum percentage of population that a city wants
People will only be sent from a city for repopulation purposes if their city has more than this minimum

The Leader can order a city to be abandoned, if there is more than one city in the Leader's civ
This causes the city's building to be removed, its people to be randomly evenly distributed among the civ's other cities,
and the city to be removed

Biomes are:
FREEZING_GRASSLAND
TROPICAL_GRASSLAND
TEMPERATE_GRASSLAND
FREEZING_FOREST
TROPICAL_FOREST
TEMPERATE_FOREST
GLACIER
DESERT
ROCKY_WASTELAND

Time is measured in days, weeks, months, and years
Days pass every <constant number of seconds>
Weeks pass every 6 days
Months pass every 5 weeks
Years pass every 12 months

Every day, each region has a chance to generate a new wheat or tree tile
This chance is determined by the region's biome
The region's biome also determines the weighting towards wheat or tree

There are global constants for people's mass, max speed, and move force
People have velocity and acceleration
People have HP
People regen HP over time
People have a hunger level
When full, they are normal
When hungry, natural HP regen is stopped
When starving, they lose HP at the base regen rate
A person will only eat when they are hungry or worse

People have an attack range
People have Attack and Defense
Attacks always hit
An attack does attacker Attack - defender Defense damage to the defender's HP
Building tiles have HP and Defense
A person attacking a building works like a person attacking a person, except the building doesn't fight back
When a person arrives at their target person or building tile to attack, if the target is still there and valid, they begin an attack countdown
When the countdown ends, if the target is still there and valid, the attack occurs as outlined above
People cannot move during the attack COUNTDOWN
When a person kills another person, they get all of their inventory items

Phase 2:

People have ai
First, for gathering
People can gather wheat and tree tiles
Gathering AI looks in chunks within some gathering range of parent city for wheat or tree tile
Should check chunks in random order each time, with the exception that it should start looking in the person's
current chunk if they are within the gather zone
Should check each chunk's tiles in random order each time
The person remembers the tile to gather based on its tile coords
When a person arrives at their target tile to gather, if the tile is still there and valid, they begin a gather countdown
When the countdown ends, if the tile is still there and valid, it is removed and wheat or wood is placed in the person's inv
A person can drop off items at civ inv by going to its parent city

People have build new city AI
The person remembers the building tile to build based on its tile coords
When a person arrives at their target tile to build, if the tile is still there and valid, they begin a build countdown
When the countdown ends, if the tile is still there and valid, wood is removed from the person's inventory (if available,
the civ inv if not, the order is abandoned if not available in either inv) and the building is built
(if the order was not abandoned due to lack of resources)

People have repair parent city building tile AI
The person remembers the building tile to repair based on its tile coords
When a person arrives at their target tile to repair, if the tile is still there and valid, they begin a repair countdown
When the countdown ends, if the tile is still there and valid, wood is removed from the person's inventory (if available,
the civ inv if not, the order is abandoned if not available in either inv) and the HP of the building increases
(if the order was not abandoned due to lack of resources)

So current person actions:
Gather, empty inventory, eat, repair city building, build unfinished building, retreat, attack enemy person, attack enemy building
When a person needs something to do, they compile a list of available orders
They sort this list in order of priority
They then select an order from the list randomly, weighted towards the top of the list
So the person picks an order, and now attempts to carry out that order
Some orders may become impossible (build building and it is killed); when this is determined they should be abandoned
The civ item needs are determined thusly:
The civ looks at its population to determine how much food is needed (it should look to the future and shoot for a small surplus)
The civ looks at city repairs and new city builds to determine how much wood is needed (it shoots for a small surplus here too)

People should try to carry a piece of wheat with them for eating purposes always
If a person becomes hungry, they should be able to eat wheat from their inventory right then (if they have any)
All orders are attempted until they are completed, become impossible, or are interrupted
Interrupts can be:
Need to eat badly and no food in inv
HP low and need to retreat
Enemy person with strong strength difference nearby (or maybe compare relative nearby forces instead), and need to retreat
Enemy person nearby and want to attack it
Enemy building nearby and want to attack it
Parent city has just been conquered and thus the conquered cooldown is active

Phase 3:

When a civ has no cities remaining, it is defeated
A defeated civ is unlinked from its leader
The leader is then unable to control anything in the game, but can still watch

The game has victory conditions (well, one for now)
If all VCs are off, the game has no end
Conquest victory condition: Be the only civilization left undefeated

Campaigns with armies
Need to read my previous stuff on this
One thing I know is that armies should act a lot like a city,
in the sense that the people in the army get their civ inv food from the general instead of the city building tile,
the general is treated as their "home location", and their orders from AI levels higher than person come from the general, not their city or civ
Also, if a person in an army has its parent city change ownership, they are assigned a new parent city in their parent civ
When a civ is defeated, its armies should be given to ... someone

Phase 4:

Have domination, and time VCs
Need a game option for ending year
Each leader needs a score

Farming
One piece of wheat could be used to plant a square of wheat tiles

Building maintenance
Buildings should not degrade if they were recently damaged

Maybe production of new people should cost food from the civ inventory
Every constant amount of time, if food is available, consume one and tick towards new person birth
This would need to be factored into wheat need calculation

Building should add to the unfinished building's HP instead of insta finishing it
Multiple people could now build
Might not need flagging anymore
Could use flagging to affect build order priority
If a building is flagged, another person is less likely to work on it
This change would mean a need to change how tree need is calculated

Reconsider combat cooldown

Per city order to stay near city?

Need something to prevent city spam
Is there also a hard max?
Cost of building city could increase per city
